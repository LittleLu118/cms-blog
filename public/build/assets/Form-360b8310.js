import{q as k,W as A,j as e,a as h,Y as D}from"./index-b404b703.js";import{A as F}from"./AdminLayout-7a9bfac6.js";import{I as n}from"./InputError-064c0406.js";import{I as j}from"./InputLabel-72431e8e.js";import{P as E}from"./PrimaryButton-b8b7c2b3.js";import{T as R}from"./TextInput-d4375825.js";import{C as S}from"./Checkbox-be5ae197.js";import{F as T}from"./FlashMessage-59b483fc.js";import{d as G,C as M}from"./ckeditor-4acfcb8a.js";import"./TopNavigation-8f5cec38.js";import"./ApplicationLogo-da4becee.js";import"./Dropdown-39ca9c73.js";import"./transition-5542242b.js";import"./ResponsiveNavLink-dbdf973d.js";import"./Icon-bbc53c24.js";import"./MainMenu-66988846.js";import"./MainMenuItem-8cb78559.js";import"./index-c044c68c.js";function ee({auth:f}){var u,x,g;const{info:o}=k().props,i=((u=o.gallery)==null?void 0:u.data)||[],{data:t,setData:m,put:v,post:N,errors:d,processing:b,transform:y}=A({medias:o.medias.data,name:i.name||"",description:i.description||"",status:((x=i.status)==null?void 0:x.value)||!1,details:((g=i.medias)==null?void 0:g.data)||[]}),C=(s,a)=>{s.preventDefault();let l=t.medias,r=t.details,c=l[a];r.push(c),l.splice(a,1),m(p=>({...p,medias:l,details:r}))},w=(s,a)=>{s.preventDefault();let l=t.medias,r=t.details,c=r[a];l.push(c),r.splice(a,1),m(p=>({...p,medias:l,details:r}))},I=s=>{s.preventDefault(),y(a=>({...a,medias:[]})),i.slug?v(route("admin.media.gallery.update",i.slug)):N(route("admin.media.gallery.store"))};return e.jsxs(F,{user:f.user,header:e.jsxs("h2",{className:"font-semibold leading-tight text-md text-slate-800",children:["Admin / ",e.jsx(h,{href:route("admin.media.index"),children:"Media"})," / ",e.jsx(h,{href:route("admin.media.gallery.index"),children:"Galleries"})," / ",e.jsx("span",{className:"text-slate-500",children:"Create / Update"})]}),children:[e.jsx(D,{title:"Admin Gallery"}),e.jsxs("section",{className:"w-full p-4",children:[e.jsx(T,{}),e.jsx("div",{className:"w-full col-span-12 p-1 bg-white rounded-md",children:e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsx("div",{className:"w-full p-4",children:e.jsxs("form",{onSubmit:I,className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"name",value:"Title"}),e.jsx(R,{id:"name",name:"name",value:t.name,className:"block w-full mt-1",autoComplete:"name",isFocused:!0,onChange:s=>m("name",s.target.value)}),e.jsx(n,{message:d.name,className:"mt-2"})]}),e.jsxs("div",{className:"block mt-4",children:[e.jsx(j,{htmlFor:"description",value:"Description"}),e.jsx(G.CKEditor,{editor:M,data:t.description,onChange:(s,a)=>m("description",a.getData()),onReady:s=>{s.editing.view.change(a=>{a.setStyle("height","100px",s.editing.view.document.getRoot())})}}),e.jsx(n,{message:d.description,className:"mt-2"})]}),e.jsx("div",{className:"block mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx(S,{name:"status",checked:t.status,onChange:s=>m("status",!t.status)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Is Active"}),e.jsx(n,{message:d.status,className:"mt-2"})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{children:"Selected Images"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.details.map((s,a)=>e.jsx("img",{className:"object-cover w-full h-32",onClick:l=>w(l,a),loading:"egaer",src:s.url.external?s.url.external:s.url.small,alt:s.name},`det${a}`))}),e.jsx(n,{message:d.details,className:"mt-2"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(E,{disabled:b,children:o.gallery.slug?"Update":"Save"})})]})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.medias.map((s,a)=>e.jsx("img",{className:"object-cover w-full h-32",onClick:l=>C(l,a),loading:"egaer",src:s.url.external?s.url.external:s.url.small,alt:s.name},`img${a}`))})]})})]})]})}export{ee as default};
