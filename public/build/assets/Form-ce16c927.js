import{e as x,a as e,d as z,W as B}from"./index-ef9004d9.js";import{I as u,T as I}from"./TextInput-1111354f.js";import{I as m}from"./InputLabel-d20dfdfd.js";import{P as K}from"./PrimaryButton-cfdff2b2.js";import{C as M}from"./Checkbox-192dc139.js";import{F as _}from"./FlashMessage-e9682f00.js";import{d as T,C as E}from"./ckeditor-25f41e4a.js";import{q as A}from"./transition-e2952f0a.js";import{S as O}from"./SelectInput-51010192.js";import"./index-af9ddad6.js";const j=x.createContext(),h=({children:i})=>{const[n,t]=x.useState(!1),c=()=>{t(g=>!g)};return e.jsx(j.Provider,{value:{open:n,setOpen:t,toggleOpen:c},children:e.jsx("div",{className:"relative w-full",children:i})})},U=({children:i})=>{const{open:n,setOpen:t,toggleOpen:c}=x.useContext(j);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:c,children:i}),n&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)})]})},W=({align:i="left",width:n="full",contentClasses:t="py-2 bg-white",children:c})=>{const{open:g,setOpen:r}=x.useContext(j);let a="origin-top";i==="left"?a="origin-top-left left-0":i==="right"&&(a="origin-top-right right-0");let v="w-full";return e.jsx(e.Fragment,{children:e.jsx(A,{as:x.Fragment,show:g,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${a} ${v}`,onClick:()=>r(!1),children:e.jsx("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 grid grid-cols-6 gap-2 "+t,children:c})})})})},G=({className:i="",children:n,...t})=>e.jsx(z,{...t,className:"flex items-center w-full px-4 py-2 text-left text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out "+i,children:n});h.Trigger=U;h.Content=W;h.Link=G;const p=h;function te({auth:i,formSuccess:n,contentData:t,assetsData:c}){var y,C,N,w,k,F,S;let g=null;t.cover&&(g=t.cover.url.external??((y=t.cover)==null?void 0:y.url.small));const{data:r,setData:a,patch:v,post:R,errors:o,processing:$,reset:f}=B({title:t.title||"",intro:t.intro||"",category:((C=t.category)==null?void 0:C.id)||"",subcategory:((N=t.subcategory)==null?void 0:N.id)||"",body:t.body||"",cover:((w=t.cover)==null?void 0:w.id)||"",selectedCover:g,status:((k=t.status)==null?void 0:k.value)||!1,published:((F=t.published)==null?void 0:F.data)||"",subcategories:b((S=t.category)==null?void 0:S.id)});function L(s,l){s.preventDefault(),a(d=>({...d,cover:l.id,selectedCover:l.url.external??l.url.small}))}function b(s){return s?c.categories.data.find(d=>{if(d.id==s)return d}).subcategories??[]:[]}function P(s,l){s.preventDefault(),a(d=>({...d,category:l,subcategories:b(l)}))}const q=s=>{s.preventDefault(),t.slug?v(route("admin.blog.content.update",t.slug),{onSuccess:()=>{f(),n()}}):R(route("admin.blog.content.store"),{onSuccess:()=>{f(),n()}})};return e.jsxs("section",{className:"w-full p-4",children:[e.jsx(_,{}),e.jsx("div",{className:"w-full col-span-12",children:e.jsx("div",{className:"w-full p-4 bg-white rounded-md",children:e.jsxs("form",{onSubmit:q,className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"category",value:"Category"}),e.jsxs(O,{id:"id_category",name:"category",className:"block w-full mt-1",value:r.category,errors:o.category,onChange:s=>P(s,s.target.value),children:[e.jsx("option",{value:"",children:"Select category"},"tip-start"),c.categories.data.map((s,l)=>e.jsx("option",{value:s.id,children:s.name},`tip${l}`))]}),e.jsx(u,{message:o.category,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"subcategory",value:"Sub-category"}),e.jsxs(O,{id:"id_subcategory",name:"subcategory",className:"block w-full mt-1",value:r.subcategory,errors:o.subcategory,onChange:s=>a("subcategory",s.target.value),children:[e.jsx("option",{value:"",children:"Select category"},"tip-start"),r.subcategories.map((s,l)=>e.jsx("option",{value:s.id,children:s.name},`tip${l}`))]}),e.jsx(u,{message:o.subcategory,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"title",value:"Title"}),e.jsx(I,{id:"title",name:"title",value:r.title,className:"block w-full mt-1",autoComplete:"title",isFocused:!0,onChange:s=>a("title",s.target.value)}),e.jsx(u,{message:o.title,className:"mt-2"})]}),e.jsxs("div",{className:"block mt-4",children:[e.jsx(m,{htmlFor:"cover",value:"Cover"}),r.selectedCover?e.jsx("img",{src:r.selectedCover,loading:"eager",className:"w-full"}):null,e.jsxs(p,{children:[e.jsx(p.Trigger,{children:e.jsx("span",{className:"inline-flex rounded-md",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-3 py-2 text-sm font-medium leading-4 transition duration-150 ease-in-out bg-white border border-transparent rounded-md text-slate-500 hover:text-slate-700 focus:outline-none",children:"Select Cover"})})}),e.jsx(p.Content,{children:c.medias.data.map((s,l)=>e.jsx(p.Link,{href:"#",onClick:d=>L(d,s),children:e.jsx("img",{src:s.url.external?s.url.external:s.url.small,loading:"eager",className:"w-full"})},`media${l}`))})]}),e.jsx(u,{message:o.cover,className:"mt-2"})]}),e.jsxs("div",{className:"block mt-4",children:[e.jsx(m,{htmlFor:"intro",value:"Intro"}),e.jsx(T.CKEditor,{editor:E,data:r.intro,onChange:(s,l)=>a("intro",l.getData()),onReady:s=>{s.editing.view.change(l=>{l.setStyle("height","100px",s.editing.view.document.getRoot())})}}),e.jsx(u,{message:o.intro,className:"mt-2"})]}),e.jsxs("div",{className:"block mt-4",children:[e.jsx(m,{htmlFor:"body",value:"Body"}),e.jsx(T.CKEditor,{editor:E,data:r.body,onChange:(s,l)=>a("body",l.getData()),onReady:s=>{s.editing.view.change(l=>{l.setStyle("height","200px",s.editing.view.document.getRoot())})}}),e.jsx(u,{message:o.body,className:"mt-2"})]}),e.jsx("div",{className:"block mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx(M,{name:"status",checked:r.status,onChange:s=>a("status",!r.status)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Is Active"}),e.jsx(u,{message:o.status,className:"mt-2"})]})}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"published",value:"Publishing Date"}),e.jsx(I,{id:"published",name:"published",type:"datetime-local",value:r.published,className:"block w-full mt-1",autoComplete:"published",isFocused:!0,onChange:s=>a("published",s.target.value)}),e.jsx(u,{message:o.published,className:"mt-2"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(K,{disabled:$,children:t.slug?"Update":"Save"})})]})})})]})}export{te as default};
