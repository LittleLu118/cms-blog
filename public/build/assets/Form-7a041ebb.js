import{q as k,W as A,a as e,d as h,b as D}from"./index-9eaef73f.js";import{A as F}from"./AdminLayout-d63c0f53.js";import{T as E,I as n}from"./TextInput-d6cb6a4c.js";import{I as j}from"./InputLabel-dd781cfe.js";import{P as R}from"./PrimaryButton-74354d44.js";import{C as S}from"./Checkbox-4664b68d.js";import{F as T}from"./FlashMessage-cf45a264.js";import{d as G,C as M}from"./ckeditor-88d811f6.js";import"./TopNavigation-702ccad5.js";import"./ApplicationLogo-58bba02d.js";import"./Dropdown-1a1d2f38.js";import"./transition-5dbd1cbb.js";import"./ResponsiveNavLink-441116e9.js";import"./Icon-bc3d3dc4.js";import"./MainMenu-8291c762.js";import"./MainMenuItem-0f5ff9e9.js";import"./index-94693d5e.js";function _({auth:f}){var p,x,g;const{info:o}=k().props,i=((p=o.gallery)==null?void 0:p.data)||[],{data:t,setData:m,put:v,post:N,errors:d,processing:b,transform:y}=A({medias:o.medias.data,name:i.name||"",description:i.description||"",status:((x=i.status)==null?void 0:x.value)||!1,details:((g=i.medias)==null?void 0:g.data)||[]}),C=(s,a)=>{s.preventDefault();let l=t.medias,r=t.details,c=l[a];r.push(c),l.splice(a,1),m(u=>({...u,medias:l,details:r}))},w=(s,a)=>{s.preventDefault();let l=t.medias,r=t.details,c=r[a];l.push(c),r.splice(a,1),m(u=>({...u,medias:l,details:r}))},I=s=>{s.preventDefault(),y(a=>({...a,medias:[]})),i.slug?v(route("admin.media.gallery.update",i.slug)):N(route("admin.media.gallery.store"))};return e.jsxs(F,{user:f.user,header:e.jsxs("h2",{className:"font-semibold leading-tight text-md text-slate-800",children:["Admin / ",e.jsx(h,{href:route("admin.media.index"),children:"Media"})," / ",e.jsx(h,{href:route("admin.media.gallery.index"),children:"Galleries"})," / ",e.jsx("span",{className:"text-slate-500",children:"Create / Update"})]}),children:[e.jsx(D,{title:"Admin Gallery"}),e.jsxs("section",{className:"w-full p-4",children:[e.jsx(T,{}),e.jsx("div",{className:"w-full col-span-12 p-1 bg-white rounded-md",children:e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsx("div",{className:"w-full p-4",children:e.jsxs("form",{onSubmit:I,className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"name",value:"Title"}),e.jsx(E,{id:"name",name:"name",value:t.name,className:"block w-full mt-1",autoComplete:"name",isFocused:!0,onChange:s=>m("name",s.target.value)}),e.jsx(n,{message:d.name,className:"mt-2"})]}),e.jsxs("div",{className:"block mt-4",children:[e.jsx(j,{htmlFor:"description",value:"Description"}),e.jsx(G.CKEditor,{editor:M,data:t.description,onChange:(s,a)=>m("description",a.getData()),onReady:s=>{s.editing.view.change(a=>{a.setStyle("height","100px",s.editing.view.document.getRoot())})}}),e.jsx(n,{message:d.description,className:"mt-2"})]}),e.jsx("div",{className:"block mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx(S,{name:"status",checked:t.status,onChange:s=>m("status",!t.status)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Is Active"}),e.jsx(n,{message:d.status,className:"mt-2"})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{children:"Selected Images"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.details.map((s,a)=>e.jsx("img",{className:"object-cover w-full h-32",onClick:l=>w(l,a),loading:"egaer",src:s.url.external?s.url.external:s.url.small,alt:s.name},`det${a}`))}),e.jsx(n,{message:d.details,className:"mt-2"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(R,{disabled:b,children:o.gallery.slug?"Update":"Save"})})]})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.medias.map((s,a)=>e.jsx("img",{className:"object-cover w-full h-32",onClick:l=>C(l,a),loading:"egaer",src:s.url.external?s.url.external:s.url.small,alt:s.name},`img${a}`))})]})})]})]})}export{_ as default};
