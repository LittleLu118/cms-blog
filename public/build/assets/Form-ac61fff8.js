import{W as C,a as e}from"./index-75108644.js";import{T as p,I as x}from"./TextInput-788b8eab.js";import{I as h}from"./InputLabel-ff8ba95c.js";import{P as w}from"./PrimaryButton-247a9105.js";import{C as c}from"./Checkbox-fc236b5a.js";import{F}from"./FlashMessage-86df9f0a.js";import{createSlug as g}from"./Utils-78048c49.js";import"./index-3aaa6f55.js";function P({auth:I,formSuccess:m,permissionData:i}){const{data:l,setData:t,patch:f,post:v,errors:u,processing:j,transform:_,reset:d}=C({display_name:i.display_name||"",is_active:i.is_active||!0,slug:i.slug||"",crud:!1,cruds:["Create","Read","Update","Delete"],permissions:[],permission:{}}),y=s=>{s.preventDefault(),i.slug||t("slug",g(s.target.value))},N=s=>{if(l.display_name=="")return;let a=!l.crud,r=l.cruds,o=[];a&&r.forEach(n=>{o.push({display_name:`${n} ${l.display_name}`,slug:g(`${n} ${l.display_name}`),is_active:l.is_active})}),t(n=>({...n,permissions:o,crud:a}))},b=(s,a)=>{s.preventDefault();let r=l.permissions;r.splice(a,1),t("permissions",r)},k=s=>{s.preventDefault(),i.slug?f(route("admin.permission.update",i.slug),{onSuccess:()=>{d(),m()}}):(l.crud||_(a=>({...a,permissions:[{display_name:a.display_name,slug:a.slug,is_active:a.is_active}]})),v(route("admin.permission.store"),{onSuccess:()=>{d(),m()}}))};return e.jsxs("section",{className:"w-full p-4",children:[e.jsx(F,{}),e.jsx("div",{className:"w-full col-span-12",children:e.jsx("div",{className:"w-full p-4 bg-white rounded-md",children:e.jsxs("form",{onSubmit:k,className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"display_name",value:"Display Name"}),e.jsx(p,{id:"display_name",name:"display_name",value:l.display_name,className:"block w-full mt-1",autoComplete:"display_name",isFocused:!0,onChange:s=>t("display_name",s.target.value),onBlur:y,required:!0}),e.jsx(x,{message:u.display_name,className:"mt-2"})]}),l.crud?null:e.jsxs("div",{children:[e.jsx(h,{htmlFor:"slug",value:"Slug"}),e.jsx(p,{id:"slug",name:"slug",value:l.slug,className:"block w-full mt-1",autoComplete:"slug",isFocused:!1,onChange:s=>t("slug",s.target.value),disabled:!0,required:!0}),e.jsx(x,{message:u.slug,className:"mt-2"})]}),e.jsx("div",{className:"block mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx(c,{name:"is_active",checked:l.is_active,onChange:s=>t("is_active",s.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Active"})]})}),i.slug?null:e.jsx("div",{className:"block mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx(c,{id:"crud",name:"crud",checked:l.crud,onChange:s=>N()}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Make CRUD"})]})}),l.crud?e.jsx("div",{className:"block mt-4",children:l.permissions.map((s,a)=>e.jsxs("label",{className:"flex items-center mt-2",children:[e.jsx(c,{name:"permissions[]",id:"permissions[]",checked:s.is_active,onChange:r=>b(r,a)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:s.display_name})]},`permlist${a}`))}):null,e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{disabled:j,children:i.slug?"Update":"Save"})})]})})})]})}export{P as default};
